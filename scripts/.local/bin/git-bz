#!/bin/bash
this="git-bz"

git for-each-ref \
	--sort=committerdate refs/heads/ \
	--format='%(if)%(HEAD)%(then)* %(else)  %(end)%(committerdate:short) : %(authorname) : %(refname:short)' \
	| fzf -d ':' \
	--bind="tab:execute(git show --color {3})" \
	--bind="enter:accept+execute(git checkout {3})+execute(${this})" \
	--bind="ctrl-d:accept+execute(git branch -d {3})+execute(${this})" \
	--preview='git show --color --stat {3}'
